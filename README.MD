# Домашнее задание к занятию «Базы данных, их типы»

# Желонкин Дмитрий
---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.
### Ответ:
Для целостности и четкой структуры данных подойдут реляционные базы данных. Также для финансовых данных важна строгая структура, поэтому используем ACID. 
Примеры СУБД: MSSQL, PostgreSQL 

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 
### Ответ:
Для ускорения работы с хешированием можно использовать специализированные библиотеки, улучшенные алгоритмы или оптимизировать инфраструктуру. 
1. OpenSSL
2. Intel IPP (integrated perfomance primitives)
3. Google's CityHash
4. std::hash 
Алгоритмы:
1. xxHash — быстрый хеш-алгоритм, обеспечивает высокую скорость хеширования, полезен для хеширования больших объёмов данных. 
2. MurmurHash — хеш-алгоритм, обеспечивает хорошую скорость хеширования. 
3. BLAKE2 — алгоритм, который на современном процессоре вычисляется быстрее, чем с помощью некоторых других алгоритмов. 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

### Ответ:

Тут хорошо подойдет NoSQL база данных, такая как MongoDB. Для таких данных важна гибкость схемы и высокая обработка запросов, как раз NoSQL базы имеют отличную гибкость и масштабируемость и позволяет налету менять структуру

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

### Ответ:

Да, например, MongoDB подходит и для лендингов, и для CRM, обеспечивая гибкость, масштабируемость и быстрый поиск. Реализация с одной MongoDB коллекцией с разделением данных

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

### Ответ:

Структура данных достаточно фиксирована, нужна прозрачная иерархия обучения и норм. Если материалы сложные и содержат разнородные документы, можно использовать MongoDB. Если структура табличная — лучше реляционная СУБД, например такая как PostgreSQL, для небольшого предприятия можно вообще использовать SQLite. 

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

### Ответ:

Да, если использовать MongoDB для лендингов/CRM, то сюда можно добавить отдельные коллекции для обучающих материалов.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

### Ответ:

Чудесно подойдет графовая база данных. Объекты между собой соединяются связями.  Задачи, связанные с маршрутами и распределением моделируются графами (узлы это объекты, связи между ними — связи маршрутов). Графовые СУБД обеспечивают очень быстрый поиск кратчайших путей, построение сложных маршрутов и анализ связей

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

### Ответ:

Можно, но при большой нагрузке лучше конечно же иметь отдельную специализированную СУБД, объединённую с общей системой через API

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

### Ответ:

Можно, но это будет не лучшим решением, так как под определенные задачи как было и описано выше нужны разные базы данных, сложно обеспечить максимальную эффективность и оптимизацию под все задачи в рамках одной СУБД. А если уж пришлось использовать одну СУБД, то я бы остановился на PostgreSQL с использованием плагинов, например для маршрутов использовать PostGIS (PostGIS добавляет поддержку географических объектов в объектно-реляционную базу данных PostgreSQL. По сути, PostGIS "пространственно активирует" сервер PostgreSQL, позволяя использовать его в качестве внутренней пространственной базы данных для геоинформационных систем (ГИС)".)


---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

### Ответ:

1. Проверить наличие средств на банковском счёте пользователя
Проверка должна происходить на стороне банковской системы или платёжного шлюза, который знает, какой именно счёт принадлежит пользователю и достаточно ли на нём денег для пополнения. Важным является, что пользователь предварительно авторизовался и банковская система аутентифицировала его. Только после этого она сможет работать с конкретным счётом и проверить его баланс.

2. Заблокировать сумму на банковском счёте и верифицировать корректность запроса
Перед списанием средств необходимо выполнить верификацию запрашиваемой суммы, чтобы убедиться, что она корректна и не превышает лимиты. После этого следует заблокировать сумму на счёте, резервировать эти средства для последующего списания. Это важно для предотвращения двойных списаний.

3. Отправить запрос на проведение платежа в банк
Запрос направляется в конкретный банк, откуда списываются средства , с необходимой аутентификацией и параметрами платежа (номер телефона, сумма, счёт списания).

4. Выполнить операцию списания с банковского счёта и зачисления на счёт телефона
После подтверждения списания банком, происходит зачисление средств на баланс телефона через системы оператора связи. Всё это осущетсвляется в рамках одной транзакции базы данных, которая обеспечивает атомарность операции: либо оба действия — списание и зачисление — завершаются успешно, либо откатываются.

5. Обновление и сохранение внутреннего баланса банковского счета и записать транзакцию в систему учёта
Банковская система регистрирует списание средств и фиксирует его в своей базе данных. 

Если все пункты пройдены успешно, то транзакция применяется, в ином случае транзакция отменяется

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

### Ответ:

По сути то же самое что и в шаге 2.1 только пользователь предварительно настраивает автоплатеж и система сама инициирует транзакцию по определенной временной отметке.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

### Ответ:

1. Гарантия целостности и согласованности данных (ACID)
2. Строгая схема данных. Это позволяет избежать ошибок
3. Мощный язык запросов SQL
4. Развитая система прав и безопасности. Есть встроенные механизмы ауентификации и ролей.
5. Стандартизированность и переносимость. SQL — стандартизованный язык, благодаря чему разные SQL-БД имеют схожий синтаксис и возможности, что упрощает перенос приложений между СУБД и уменьшает зависимость от конкретного вендора

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

### Ответ:

NewSQL обьединят в себе все хорошее от классических реляционных SQL баз (транзакции ACID, язык SQL) и от NoSQL производительность и архитектуру. 

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

### Ответ:

Критерии выбора СУБД:
1. Масштабируемость - СУБД должна легко горизонтально масштабироваться на сотни и тысячи узлов, используя шардирование или partitioning.

2. Поддержка распределённых транзакций и обработки - важно, чтобы база эффективно обрабатывала параллельные и распределённые запросы без потери согласованности.

3. Высокая скорость чтения и записи - при больших объёмах нагрузка должна распределяться равномерно, обеспечивая пропускную способность.

4. Гибкая модель данных - Для аналитики и вычислений хорошо подходят колоночные, графовые или мульти-модельные БД.

Тип СУБД - Распределённая аналитическая СУБД.
Я отдам предпочтение Apache Hadoop. 

Apache Hadoop — это платформа для хранения и работы с большими объемами данных. Ее преимущество заключается в распределении вычислений между множеством узлов. Hadoop разбивает большую задачу на много маленьких и решает их одновременно на разных компьютерах

1. Масштабируемость - Одной из основных целей Hadoop изначально было обеспечение горизонтальной масштабируемости кластера посредством добавления недорогих узлов (оборудования массового класса, англ. commodity hardware), без прибегания к мощным серверам и дорогим сетям хранения данных. Функционирующие кластеры размером в тысячи узлов подтверждают осуществимость и экономическую эффективность таких систем

2. Экономия. Дешевые сервера на базе Hadoop объединяются в мощный вычислительный кластер. Компании используют Hadoop, чтобы не инвестировать в дорогостоящее оборудование.

3. Отказоустойчивость. Благодаря распределенной архитектуре и автоматической репликации Hadoop работает даже при отказе отдельных узлов кластера.

4. Гибкость. Hadoop применяется в проектах со структурированными и неструктурированными данными.

Модель вычислений - MapReduce или Dataflow ( Apache Spark/Flink)
1. MapReduce — классическая модель, которая состоит из двух фаз: map (параллельная обработка данных) и reduce (агрегирующие операции). Однако она может быть неэффективной для сложных задач, так как все результаты (конечные и промежуточные) записываются на диск. 9

2. Spark использует идею локальности данных, но выносит большинство вычислений в память, а не на диск. Это делает его более эффективным для многих задач. Ключевое понятие в Spark — RDD (resilient distributed dataset), который представляет собой указатель на ленивую распределённую коллекцию данных.

---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.